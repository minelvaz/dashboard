<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Antique Timetable Planner</title>
    <style>
        :root {
            --primary-bg: #e8dcc4;
            --card-bg: #f5ede0;
            --text-main: #3d2e1f;
            --border-color: #8b7355;
            
            /* Event Colors - Antique Tones */
            --color-morning: #fef5e7; 
            --border-morning: #d4a574;
            --color-sleep: #e8e3dc;   
            --border-sleep: #9b8b7e;

            /* Sidebar Task Label Colors */
            --sidebar-task-bg: #faf6f0;
            --sidebar-task-border: #b8a592;
            --sidebar-task-text: #3d2e1f;
            --sidebar-delete-color: #8b4513;

            /* Scheduled Task Label Colors */
            --scheduled-task-bg: #f0e6d2;
            --scheduled-task-border: #c9b896;
            --scheduled-task-text: #4a3824;

            /* Delete Button Color */
            --delete-bg: #8b4513; 
            
            /* Header Colors */
            --color-header-sat: #d4c4b0;
            --color-header-sun: #c9a875;

            /* Note Colors - Aged Paper */
            --note-yellow: #f9f3e3;
            --note-pink: #f5e6e0;
            --note-blue: #e8ece8;
            --note-green: #ebe8d8;
            --note-purple: #ede8e3;
        }

        body {
            font-family: 'Georgia', 'Garamond', serif;
            margin: 0;
            padding: 20px;
            background-color: var(--primary-bg);
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(139, 115, 85, 0.03) 2px, rgba(139, 115, 85, 0.03) 4px);
            color: var(--text-main);
            min-height: 100vh; 
            box-sizing: border-box;
        }

        .page-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .main-container {
            display: flex;
            width: 100%;
            background: var(--card-bg);
            border-radius: 4px;
            box-shadow: 
                0 8px 24px rgba(61, 46, 31, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            border: 2px solid var(--border-color);
            overflow: hidden;
            min-height: 500px; 
            margin-bottom: 30px;
            position: relative;
        }

        .main-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(139, 115, 85, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(139, 115, 85, 0.03) 0%, transparent 50%);
            pointer-events: none;
        }

        /* --- LEFT SIDEBAR (FOCUS) --- */
        .sidebar {
            width: 250px;
            background-color: #f0e8da; 
            border-right: 2px solid var(--border-color);
            padding: 20px;
            display: flex;
            flex-direction: column; 
            box-sizing: border-box;
            position: relative;
            z-index: 1;
        }

        .sidebar h2 {
            font-size: 32px; 
            font-weight: normal;
            margin: 0;
            color: var(--text-main);
            text-align: left;
            padding-bottom: 15px;
            margin-bottom: 18px;
            flex-shrink: 0;
            font-family: 'Georgia', serif;
            letter-spacing: 2px;
            text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.5);
        }
        
        .task-list-container {
            flex-grow: 0;           
            flex-shrink: 0;           
            overflow-y: auto; 
            padding-right: 5px; 
            max-height: 80vh;       
            margin-bottom: 15px;     
        }

        .task-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .task-item {
            background: var(--sidebar-task-bg);
            color: var(--sidebar-task-text);
            border: 1.5px solid var(--sidebar-task-border);
            padding: 10px 16px;
            margin-bottom: 10px;
            border-radius: 20px; 
            font-size: 14px;
            font-weight: normal;
            cursor: grab;
            transition: all 0.2s;
            box-shadow: 
                0 2px 4px rgba(61, 46, 31, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            user-select: none;
            position: relative;
            display: flex; 
            justify-content: space-between;
            align-items: center;
        }
        
        .task-item:hover {
            box-shadow: 0 3px 8px rgba(61, 46, 31, 0.2);
        }
        
        .task-item span {
            flex-grow: 1;
            text-align: center;
            padding: 0 5px; 
            min-width: 0; 
        }

        .task-item .sidebar-delete-btn {
            color: var(--sidebar-delete-color);
            font-weight: bold;
            font-size: 14px;
            line-height: 1;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.15s;
            width: 15px;
            text-align: right;
            flex-shrink: 0;
        }
        
        .task-item:hover .sidebar-delete-btn {
            opacity: 1;
        }

        .task-item.editing {
            border: 2px solid #8b7355;
            cursor: default;
        }
        .task-item.editing .sidebar-delete-btn {
            display: none;
        }

        .task-item input {
            border: none;
            background: transparent;
            font-size: 14px;
            font-weight: normal;
            color: var(--sidebar-task-text);
            width: 100%;
            text-align: center;
            font-family: 'Georgia', serif;
        }
        .task-item input:focus {
            outline: none;
        }
        
        .add-task-btn {
            padding: 10px 16px;
            background: linear-gradient(to bottom, #c9a875 0%, #a68a5f 100%);
            color: #f5f5dc;
            border: 1.5px solid #8b7355;
            border-radius: 20px;
            text-align: center;
            font-weight: normal;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 
                0 3px 6px rgba(61, 46, 31, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            transition: all 0.2s;
            flex-shrink: 0; 
            width: 100%; 
            box-sizing: border-box;
            font-family: 'Georgia', serif;
            letter-spacing: 1px;
        }
        .add-task-btn:hover {
            background: linear-gradient(to bottom, #d4b080 0%, #b8956a 100%);
            box-shadow: 0 4px 8px rgba(61, 46, 31, 0.25);
        }

        /* --- TIMETABLE GRID STYLING --- */
        .schedule-area { 
            flex: 1; 
            padding: 20px; 
            display: flex; 
            flex-direction: column; 
            padding-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        
        .main-title-container {
            grid-column: 1 / 6; 
            grid-row: 1; 
            font-size: 32px;
            font-weight: normal;
            color: var(--text-main);
            text-align: center;
            padding-bottom: 15px;
            margin-bottom: 18px;
            font-family: 'Georgia', serif;
            letter-spacing: 3px;
            text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.5);
        }

        .timetable-grid { 
            display: grid; 
            grid-template-columns: repeat(7, 1fr); 
            grid-template-rows: auto 40px auto; 
            gap: 8px; 
        }

        .day-header { 
            grid-row: 2; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-weight: normal;
            font-size: 15px;
            border-radius: 3px; 
            background-color: #e8dcc4; 
            border: 1.5px solid var(--border-color);
            box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.3);
            font-family: 'Georgia', serif;
            letter-spacing: 1px;
        }
        .day-header.sat { background-color: var(--color-header-sat); }
        .day-header.sun { background-color: var(--color-header-sun); color: #f5f5dc; }
        
        .grid-content { 
            grid-column: 1 / -1; 
            grid-row: 3; 
            display: grid; 
            grid-template-columns: repeat(7, 1fr); 
            grid-template-rows: 60px minmax(60px, 150px) 60px; 
            gap: 8px; 
        }

        .event-fixed { 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            border-radius: 3px; 
            font-size: 14px; 
            font-weight: normal; 
            border-left: 4px solid transparent; 
            z-index: 2;
            box-shadow: 
                0 2px 4px rgba(61, 46, 31, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            border: 1.5px solid;
            letter-spacing: 1px;
        }

        .morning-reset { 
            grid-column: 1 / 6; 
            grid-row: 1; 
            background-color: var(--color-morning);
            border-color: var(--border-morning);
            color: #7d5e3e;
        }

        .sleep-time { 
            grid-column: 1 / 6; 
            grid-row: 3; 
            background-color: var(--color-sleep);
            border-color: var(--border-sleep);
            color: #5d4e42;
        }

        .slot { 
            grid-row: 2; 
            border: 1.5px dashed var(--border-color); 
            border-radius: 3px; 
            background-color: #faf8f3; 
            position: relative; 
            display: flex; 
            flex-direction: column; 
            gap: 2px; 
            padding: 2px;
            box-shadow: inset 0 1px 2px rgba(61, 46, 31, 0.05);
        }
        .weekend-slot { background-color: #f5f1ea; }
        .slot.drag-over { 
            background-color: #f0e6d2; 
            border-color: #a68a5f; 
            border-style: solid; 
        }

        .scheduled-task {
            background-color: var(--scheduled-task-bg);
            color: var(--scheduled-task-text);
            border: 1.5px solid var(--scheduled-task-border);
            border-radius: 3px;
            padding: 4px 8px;
            font-size: 12px;
            cursor: pointer;
            box-shadow: 0 1px 3px rgba(61, 46, 31, 0.15);
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-right: 25px; 
            flex-grow: 1; 
            min-height: 20px;
            font-family: 'Georgia', serif;
        }

        .delete-btn {
            position: absolute;
            right: 4px;
            top: 50%;
            transform: translateY(-50%);
            width: 15px; 
            height: 15px;
            border-radius: 50%;
            background-color: var(--delete-bg);
            color: #f5f5dc;
            font-weight: bold;
            line-height: 15px;
            text-align: center;
            cursor: pointer;
            font-family: sans-serif;
            opacity: 0; 
            transition: opacity 0.15s;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }
        .scheduled-task:hover .delete-btn {
            opacity: 1;
        }

        /* --- NOTES SECTION --- */
        .notes-section {
            width: 100%;
            max-width: 1200px;
            position: relative;
            min-height: 300px;
        }

        .notes-header {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            margin-bottom: 20px;
        }

        .add-note-btn {
            padding: 10px 20px;
            background: linear-gradient(to bottom, #c9a875 0%, #a68a5f 100%);
            color: #f5f5dc;
            border: 1.5px solid #8b7355;
            border-radius: 20px;
            font-weight: normal;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 
                0 3px 8px rgba(61, 46, 31, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            transition: all 0.2s;
            font-family: 'Georgia', serif;
            letter-spacing: 1px;
        }
        .add-note-btn:hover {
            background: linear-gradient(to bottom, #d4b080 0%, #b8956a 100%);
            box-shadow: 0 4px 10px rgba(61, 46, 31, 0.25);
        }

        .notes-container {
            position: relative;
            width: 100%;
            min-height: 300px;
        }

        .sticky-note {
            position: absolute;
            width: 200px;
            min-height: 150px;
            padding: 15px;
            border-radius: 2px;
            box-shadow: 
                0 4px 12px rgba(61, 46, 31, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            user-select: none;
            font-size: 13px;
            line-height: 1.6;
            border: 1.5px solid rgba(139, 115, 85, 0.3);
            font-family: 'Georgia', serif;
            background-image: 
                repeating-linear-gradient(transparent, transparent 23px, rgba(139, 115, 85, 0.1) 23px, rgba(139, 115, 85, 0.1) 24px);
        }

        .sticky-note.yellow { background-color: var(--note-yellow); }
        .sticky-note.pink { background-color: var(--note-pink); }
        .sticky-note.blue { background-color: var(--note-blue); }
        .sticky-note.green { background-color: var(--note-green); }
        .sticky-note.purple { background-color: var(--note-purple); }

        .note-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid rgba(61, 46, 31, 0.2);
        }

        .note-drag-handle {
            cursor: move;
            font-size: 14px;
            color: rgba(61, 46, 31, 0.4);
            user-select: none;
        }

        .note-delete {
            cursor: pointer;
            font-size: 18px;
            color: rgba(139, 69, 19, 0.6);
            transition: color 0.2s;
            font-weight: normal;
        }
        .note-delete:hover {
            color: #8b4513;
        }

        .note-content {
            width: 100%;
            border: none;
            background: transparent;
            resize: none;
            font-family: 'Georgia', serif;
            font-size: 13px;
            line-height: 24px;
            min-height: 100px;
            color: var(--text-main);
        }
        .note-content:focus {
            outline: none;
        }

        /* Antique Paper Texture */
        .sticky-note::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(139, 115, 85, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 90% 80%, rgba(139, 115, 85, 0.05) 0%, transparent 50%);
            pointer-events: none;
        }

    </style>
</head>
<body>

    <div class="page-container">
        <div class="main-container">
            
            <aside class="sidebar">
                <h2>Focus</h2>
                
                <div class="task-list-container">
                    <ul class="task-list" id="taskList">
                        </ul>
                </div>
                
                <div class="add-task-btn" onclick="addTask()">
                    + Focus
                </div>
                
            </aside>

            <main class="schedule-area">
                
                <div class="timetable-grid">
                    
                    <div class="main-title-container">Time Table</div>
                    
                    <div class="day-header">Mon</div>
                    <div class="day-header">Tue</div>
                    <div class="day-header">Wed</div>
                    <div class="day-header">Thu</div>
                    <div class="day-header">Fri</div>
                    <div class="day-header sat">Sat</div>
                    <div class="day-header sun">Sun</div>

                    <div class="grid-content">
                        
                        <div class="event-fixed morning-reset">Morning Reset</div>
                        <div class="slot weekend-slot" style="grid-row: 1;"></div>
                        <div class="slot weekend-slot" style="grid-row: 1;"></div>
                        
                        <div class="slot" style="grid-column: 1;" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                        <div class="slot" style="grid-column: 2;" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                        <div class="slot" style="grid-column: 3;" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                        <div class="slot" style="grid-column: 4;" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                        <div class="slot" style="grid-column: 5;" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                        <div class="slot weekend-slot" style="grid-column: 6;" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                        <div class="slot weekend-slot" style="grid-column: 7;" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                        
                        <div class="event-fixed sleep-time">Sleep Time</div>
                        <div class="slot weekend-slot" style="grid-row: 3;"></div>
                        <div class="slot weekend-slot" style="grid-row: 3;"></div>

                    </div>
                </div>
            </main>
        </div>

        <!-- NOTES SECTION -->
        <div class="notes-section">
            <div class="notes-header">
                <button class="add-note-btn" onclick="addNote()">+ Note</button>
            </div>
            <div class="notes-container" id="notesContainer">
            </div>
        </div>
    </div>

    <script>
        // Initial list of tasks
        const initialTasks = ["Japanese", "English", "Web Dev", "Electricity"];
        const taskList = document.getElementById('taskList');

        // --- CORE FOCUS/TASK MANAGEMENT FUNCTIONS ---

        function renderTasks() {
            taskList.innerHTML = ''; 
            initialTasks.forEach(taskName => {
                const li = document.createElement("li");
                li.className = "task-item";
                li.draggable = true;
                li.ondragstart = drag;
                
                const taskText = document.createElement("span");
                taskText.innerText = taskName;
                taskText.ondblclick = function(e) { 
                    e.stopPropagation(); 
                    renameTask(li, taskName); 
                };
                li.appendChild(taskText);

                const deleteBtn = document.createElement("div");
                deleteBtn.className = "sidebar-delete-btn";
                deleteBtn.innerText = "×";
                deleteBtn.title = "Click to remove focus item";
                
                deleteBtn.onclick = function(e) { 
                    e.stopPropagation(); 
                    deleteTask(taskName);
                };
                li.appendChild(deleteBtn);
                
                taskList.appendChild(li);
            });
        }
        
        function addTask() {
            const newTaskName = "New Focus Item " + (initialTasks.length + 1);
            initialTasks.push(newTaskName);
            renderTasks();
            const newLi = taskList.lastChild;
            renameTask(newLi, newTaskName);
        }

        function deleteTask(taskName) {
            const index = initialTasks.indexOf(taskName);
            if (index > -1) {
                initialTasks.splice(index, 1);
                renderTasks();
                
                document.querySelectorAll('.scheduled-task').forEach(scheduledTask => {
                    if (scheduledTask.querySelector('span').innerText === taskName) {
                        scheduledTask.remove();
                    }
                });
            }
        }
        
        function renameTask(li, oldName) {
            if (li.classList.contains('editing')) return;

            li.classList.add('editing');
            li.draggable = false;
            li.ondragstart = null;
            li.querySelector('span').style.display = 'none'; 

            const input = document.createElement('input');
            input.type = 'text';
            input.value = oldName;
            
            li.insertBefore(input, li.querySelector('.sidebar-delete-btn')); 
            input.focus();

            const finishRename = () => {
                const newName = input.value.trim();
                const index = initialTasks.indexOf(oldName);
                
                if (newName && index > -1) {
                    initialTasks[index] = newName;
                    
                    document.querySelectorAll('.scheduled-task').forEach(scheduledTask => {
                        if (scheduledTask.querySelector('span').innerText === oldName) {
                            scheduledTask.querySelector('span').innerText = newName;
                        }
                    });
                } else if (newName === "" && index > -1) {
                    if (confirm(`Do you want to permanently delete the focus item "${oldName}"?`)) {
                        deleteTask(oldName);
                        return;
                    }
                }
                
                li.removeChild(input);
                li.classList.remove('editing');
                renderTasks();
            };

            input.onblur = finishRename;
            input.onkeydown = function(e) {
                if (e.key === 'Enter') {
                    finishRename();
                }
            };
        }

        document.addEventListener('DOMContentLoaded', renderTasks);


        // --- DRAG & DROP FUNCTIONS ---
        
        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.querySelector('span').innerText);
        }

        function allowDrop(ev) {
            ev.preventDefault();
            ev.currentTarget.classList.add('drag-over');
        }

        document.querySelectorAll('.slot').forEach(slot => {
            slot.addEventListener('dragleave', () => {
                slot.classList.remove('drag-over');
            });
        });

        function updateSlotSizing(slot) {
            // Recalculates the height when an item is added or removed.
        }

        function drop(ev) {
            ev.preventDefault();
            var data = ev.dataTransfer.getData("text");
            var targetSlot = ev.target;

            if (!targetSlot.classList.contains('slot')) {
                targetSlot = targetSlot.closest('.slot');
            }
            
            targetSlot.classList.remove('drag-over');

            if (data) {
                var newTask = document.createElement("div");
                newTask.className = "scheduled-task";
                
                var textSpan = document.createElement("span");
                textSpan.innerText = data;
                newTask.appendChild(textSpan);

                var deleteBtn = document.createElement("div");
                deleteBtn.className = "delete-btn";
                deleteBtn.innerText = "×";
                deleteBtn.title = "Click to remove";
                
                deleteBtn.onclick = function() {
                    const taskName = this.parentElement.querySelector('span').innerText;
                    this.parentElement.remove();
                    
                    if (!initialTasks.includes(taskName)) {
                        initialTasks.push(taskName);
                        renderTasks();
                    }
                    
                    updateSlotSizing(targetSlot); 
                };

                newTask.appendChild(deleteBtn);
                targetSlot.appendChild(newTask);
                
                updateSlotSizing(targetSlot); 
            }
        }
        
        document.querySelectorAll('.slot').forEach(slot => {
            slot.ondrop = drop;
            slot.ondragover = allowDrop;
        });


        // --- STICKY NOTES FUNCTIONS ---
        
        let noteCount = 0;
        const colors = ['yellow', 'pink', 'blue', 'green', 'purple'];
        let isDragging = false;
        let currentNote = null;
        let startX, startY, initialLeft, initialTop;

        function addNote() {
            const notesContainer = document.getElementById('notesContainer');
            const note = document.createElement('div');
            const color = colors[noteCount % colors.length];
            
            note.className = `sticky-note ${color}`;
            note.style.left = (20 + (noteCount * 30)) + 'px';
            note.style.top = (20 + (noteCount * 30)) + 'px';
            
            note.innerHTML = `
                <div class="note-header">
                    <span class="note-drag-handle">☰</span>
                    <span class="note-delete">×</span>
                </div>
                <textarea class="note-content" placeholder="Type your note here..."></textarea>
            `;
            
            notesContainer.appendChild(note);
            
            const dragHandle = note.querySelector('.note-drag-handle');
            const deleteBtn = note.querySelector('.note-delete');
            
            dragHandle.onmousedown = function(e) {
                isDragging = true;
                currentNote = note;
                startX = e.clientX;
                startY = e.clientY;
                initialLeft = note.offsetLeft;
                initialTop = note.offsetTop;
                note.style.zIndex = 1000;
                e.preventDefault();
            };
            
            deleteBtn.onclick = function() {
                note.remove();
            };
            
            noteCount++;
        }

        document.addEventListener('mousemove', function(e) {
            if (!isDragging || !currentNote) return;
            
            const dx = e.clientX - startX;
            const dy = e.clientY - startY;
            
            currentNote.style.left = (initialLeft + dx) + 'px';
            currentNote.style.top = (initialTop + dy) + 'px';
        });

        document.addEventListener('mouseup', function() {
            if (isDragging && currentNote) {
                currentNote.style.zIndex = 1;
                isDragging = false;
                currentNote = null;
            }
        });
        
    </script>
</body>
</html>
